<data-definition>
    <enum-type type-name='item_type' base-type='int16_t'>
        <enum-attr name='caption'/>
        <enum-attr name='is_rawable' type-name='bool'/>
        <enum-attr name='is_creature_mat' type-name='bool' comment='instead of material, uses a creature ID'/>
        <enum-attr name='is_plant_mat' type-name='bool' comment='instead of material, uses a plant ID'/>

        <enum-item name='NONE' value='-1'/>
        <enum-item name='BAR' comment='Bars, such as metal, fuel, or soap.'>
            <item-attr name='caption' value='bars'/>
        </enum-item>
        <enum-item name='SMALLGEM' comment='Cut gemstones usable in jewelers workshop'>
            <item-attr name='caption' value='cut gem'/>
        </enum-item>
        <enum-item name='BLOCKS' comment='Blocks of any kind.'>
            <item-attr name='caption' value='blocks'/>
        </enum-item>
        <enum-item name='ROUGH' comment='Rough gemstones.'>
            <item-attr name='caption' value='rough gem'/>
        </enum-item>
        <enum-item name='STONE' comment='Raw mined stone.'>
            <item-attr name='caption' value='stone'/>
        </enum-item>
        <enum-item name='WOOD' comment='Wooden logs.'>
            <item-attr name='caption' value='logs'/>
        </enum-item>
        <enum-item name='DOOR' comment='Doors.'>
            <item-attr name='caption' value='door'/>
        </enum-item>
        <enum-item name='FLOODGATE' comment='Floodgates.'>
            <item-attr name='caption' value='floodgate'/>
        </enum-item>
        <enum-item name='BED' comment='Beds.'>
            <item-attr name='caption' value='bed'/>
        </enum-item>
        <enum-item name='CHAIR' comment='Chairs and thrones.'>
            <item-attr name='caption' value='chair'/>
        </enum-item>
        <enum-item name='CHAIN' comment='Restraints.'>
            <item-attr name='caption' value='chain'/>
        </enum-item>
        <enum-item name='FLASK' comment='Flasks.'>
            <item-attr name='caption' value='flask'/>
        </enum-item>
        <enum-item name='GOBLET' comment='Goblets.'>
            <item-attr name='caption' value='goblet'/>
        </enum-item>
        <enum-item name='INSTRUMENT' comment='Musical instruments.'>
            <item-attr name='caption' value='instrument'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='TOY' comment='Toys.'>
            <item-attr name='caption' value='toy'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='WINDOW' comment='Glass windows.'>
            <item-attr name='caption' value='window'/>
        </enum-item>
        <enum-item name='CAGE' comment='Cages.'>
            <item-attr name='caption' value='cage'/>
        </enum-item>
        <enum-item name='BARREL' comment='Barrels.'>
            <item-attr name='caption' value='barrel'/>
        </enum-item>
        <enum-item name='BUCKET' comment='Buckets.'>
            <item-attr name='caption' value='bucket'/>
        </enum-item>
        <enum-item name='ANIMALTRAP' comment='Animal traps.'>
            <item-attr name='caption' value='animal trap'/>
        </enum-item>
        <enum-item name='TABLE' comment='Tables.'>
            <item-attr name='caption' value='table'/>
        </enum-item>
        <enum-item name='COFFIN' comment='Coffins.'>
            <item-attr name='caption' value='coffin'/>
        </enum-item>
        <enum-item name='STATUE' comment='Statues.'>
            <item-attr name='caption' value='statue'/>
        </enum-item>
        <enum-item name='CORPSE' comment='Corpses. Does not have a material.'>
            <item-attr name='caption' value='corpse'/>
        </enum-item>
        <enum-item name='WEAPON' comment='Weapons.'>
            <item-attr name='caption' value='weapon'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='ARMOR' comment='Armor and clothing worn on the upper body.'>
            <item-attr name='caption' value='armor'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='SHOES' comment='Armor and clothing worn on the feet.'>
            <item-attr name='caption' value='footwear'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='SHIELD' comment='Shields and bucklers.'>
            <item-attr name='caption' value='shield'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='HELM' comment='Armor and clothing worn on the head.'>
            <item-attr name='caption' value='headwear'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='GLOVES' comment='Armor and clothing worn on the hands.'>
            <item-attr name='caption' value='handwear'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='BOX' comment='Chests (wood), coffers (stone), boxes (glass), and bags (cloth or leather).'>
            <item-attr name='caption' value='box/bag'/>
        </enum-item>
        <enum-item name='BIN' comment='Bins.'>
            <item-attr name='caption' value='bin'/>
        </enum-item>
        <enum-item name='ARMORSTAND' comment='Armor stands.'>
            <item-attr name='caption' value='armor stand'/>
        </enum-item>
        <enum-item name='WEAPONRACK' comment='Weapon racks.'>
            <item-attr name='caption' value='weapon rack'/>
        </enum-item>
        <enum-item name='CABINET' comment='Cabinets.'>
            <item-attr name='caption' value='cabinet'/>
        </enum-item>
        <enum-item name='FIGURINE' comment='Figurines.'>
            <item-attr name='caption' value='figurine'/>
        </enum-item>
        <enum-item name='AMULET' comment='Amulets.'>
            <item-attr name='caption' value='amulet'/>
        </enum-item>
        <enum-item name='SCEPTER' comment='Scepters.'>
            <item-attr name='caption' value='scepter'/>
        </enum-item>
        <enum-item name='AMMO' comment='Ammunition for hand-held weapons.'>
            <item-attr name='caption' value='ammo'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='CROWN' comment='Crowns.'>
            <item-attr name='caption' value='crown'/>
        </enum-item>
        <enum-item name='RING' comment='Rings.'>
            <item-attr name='caption' value='ring'/>
        </enum-item>
        <enum-item name='EARRING' comment='Earrings.'>
            <item-attr name='caption' value='earring'/>
        </enum-item>
        <enum-item name='BRACELET' comment='Bracelets.'>
            <item-attr name='caption' value='bracelet'/>
        </enum-item>
        <enum-item name='GEM' comment='Large gems.'>
            <item-attr name='caption' value='large gem'/>
        </enum-item>
        <enum-item name='ANVIL' comment='Anvils.'>
            <item-attr name='caption' value='anvil'/>
        </enum-item>
        <enum-item name='CORPSEPIECE' comment='Body parts. Does not have a material.'>
            <item-attr name='caption' value='body part'/>
        </enum-item>
        <enum-item name='REMAINS' comment='Dead vermin bodies. Material is CREATURE_ID.'>
            <item-attr name='caption' value='remains'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='MEAT' comment='Butchered meat.'>
            <item-attr name='caption' value='meat'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='FISH' comment='Prepared fish. Material is CREATURE_ID.'>
            <item-attr name='caption' value='fish'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='FISH_RAW' comment='Unprepared fish. Material is CREATURE_ID.'>
            <item-attr name='caption' value='raw fish'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='VERMIN' comment='Live vermin. Material is CREATURE_ID.'>
            <item-attr name='caption' value='vermin'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='PET' comment='Tame vermin. Material is CREATURE_ID.'>
            <item-attr name='caption' value='tame vermin'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='SEEDS' comment='Seeds from plants.'>
            <item-attr name='caption' value='seeds'/>
            <item-attr name='is_plant_mat' value='true'/>
        </enum-item>
        <enum-item name='PLANT' comment='Plants.'>
            <item-attr name='caption' value='plant'/>
            <item-attr name='is_plant_mat' value='true'/>
        </enum-item>
        <enum-item name='SKIN_RAW' comment='Raw skins.'>
            <item-attr name='caption' value='leather'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='SKIN_TANNED' comment='Tanned skins.'>
            <item-attr name='caption' value='leather'/>
        </enum-item>
        <enum-item name='BONES' comment='Bones.'>
            <item-attr name='caption' value='bones'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='SHELL' comment='Shells.'>
            <item-attr name='caption' value='shell'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='LEAVES' comment='Leaves, usually from quarry bushes.'>
            <item-attr name='caption' value='leaves'/>
            <item-attr name='is_plant_mat' value='true'/>
        </enum-item>
        <enum-item name='THREAD' comment='Thread gathered from webs or made at the farmers workshop.'>
            <item-attr name='caption' value='thread'/>
        </enum-item>
        <enum-item name='CLOTH' comment='Cloth made at the loom.'>
            <item-attr name='caption' value='cloth'/>
        </enum-item>
        <enum-item name='TOTEM' comment='Skull totems.'>
            <item-attr name='caption' value='totem'/>
        </enum-item>
        <enum-item name='SKULL' comment='Skulls.'>
            <item-attr name='caption' value='skull'/>
            <item-attr name='is_creature_mat' value='true'/>
        </enum-item>
        <enum-item name='PANTS' comment='Armor and clothing worn on the legs.'>
            <item-attr name='caption' value='legwear'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='BACKPACK' comment='Backpacks.'>
            <item-attr name='caption' value='backpack'/>
        </enum-item>
        <enum-item name='QUIVER' comment='Quivers.'>
            <item-attr name='caption' value='quiver'/>
        </enum-item>
        <enum-item name='CATAPULTPARTS' comment='Catapult parts.'>
            <item-attr name='caption' value='catapult part'/>
        </enum-item>
        <enum-item name='BALLISTAPARTS' comment='Ballista parts.'>
            <item-attr name='caption' value='ballista part'/>
        </enum-item>
        <enum-item name='SIEGEAMMO' comment='Siege engine ammunition.'>
            <item-attr name='caption' value='siege ammo'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='BALLISTAARROWHEAD' comment='Ballista arrow heads.'>
            <item-attr name='caption' value='ballista arrow head'/>
        </enum-item>
        <enum-item name='TRAPPARTS' comment='Mechanisms.'>
            <item-attr name='caption' value='mechanism'/>
        </enum-item>
        <enum-item name='TRAPCOMP' comment='Trap components.'>
            <item-attr name='caption' value='trap component'/>
            <item-attr name='is_rawable' value='true'/>
        </enum-item>
        <enum-item name='EXTRACT' comment='Plant/creature extract.'>
            <item-attr name='caption' value='extract'/>
        </enum-item>
        <enum-item name='POTION' comment='Potions.'>
            <item-attr name='caption' value='potion'/>
        </enum-item>
        <enum-item name='DRINK' comment='Alcoholic drinks.'>
            <item-attr name='caption' value='drink'/>
        </enum-item>
        <enum-item name='POWDER_MISC' comment='Powders such as flour, gypsum plaster, dye, or sand.'>
            <item-attr name='caption' value='powder'/>
        </enum-item>
        <enum-item name='CHEESE' comment='Pieces of cheese.'>
            <item-attr name='caption' value='cheese'/>
        </enum-item>
        <enum-item name='FOOD' comment='Prepared meals. Subtypes come from item_food.txt'>
            <item-attr name='caption' value='prepared meal'/>
        </enum-item>
        <enum-item name='LIQUID_MISC' comment='Liquids such as water, lye, and extracts.'>
            <item-attr name='caption' value='liquid'/>
        </enum-item>
        <enum-item name='COIN' comment='Coins.'>
            <item-attr name='caption' value='coin'/>
        </enum-item>
        <enum-item name='GLOB' comment='Fat, tallow, pastes/pressed objects, and small bits of molten rock/metal.'>
            <item-attr name='caption' value='glob'/>
        </enum-item>
        <enum-item name='ROCK' comment='Small rocks (usually sharpened and/or thrown in adventurer mode)'>
            <item-attr name='caption' value='small rock'/>
        </enum-item>
        <enum-item name='PIPE_SECTION' comment='Pipe sections.'>
            <item-attr name='caption' value='pipe section'/>
        </enum-item>
        <enum-item name='HATCH_COVER' comment='Hatch covers.'>
            <item-attr name='caption' value='hatch cover'/>
        </enum-item>
        <enum-item name='GRATE' comment='Grates.'>
            <item-attr name='caption' value='grate'/>
        </enum-item>
        <enum-item name='QUERN' comment='Querns.'>
            <item-attr name='caption' value='quern'/>
        </enum-item>
        <enum-item name='MILLSTONE' comment='Millstones.'>
            <item-attr name='caption' value='millstone'/>
        </enum-item>
    </enum-type>

    <class-type type-name='itemdef' original-name='itemdefst'>
        <stl-string name="id"/>
        <int16_t name="subtype"/>

        <code-helper name='describe'>$.id</code-helper>

        <virtual-methods>
            <vmethod name='parseRaws'>
                <pointer/>
                <pointer/>
                <pointer/>
            </vmethod>
            <vmethod name='categorize' comment='add to world.raws.itemdefs.whatever'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <enum-type type-name='damage_type'>
        <enum-item name='BLUDGEON'/>
        <enum-item name='SLASH'/>
        <enum-item name='GORE'/>
        <enum-item name='PIERCE'/>
        <enum-item name='BURN'/>
        <enum-item name='HEAT'/>
        <enum-item name='COLD'/>
    </enum-type>

    <class-type type-name='itemdef_ammost' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.ammo'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name='damage'/>
        <enum base-type='int32_t' name='damage_type' type-name='damage_type'/>
        <stl-string name="ammo_class"/>
        <int16_t name="stick_chance"/>
    </class-type>

    <enum-type type-name='armor_general_flags'>
        <enum-item name='SOFT'/>
        <enum-item name='HARD'/>
        <enum-item name='METAL'/>
        <enum-item name='BARRED'/>
        <enum-item name='SCALED'/>
        <enum-item name='LEATHER'/>
        <enum-item name='SHAPED'/>
    </enum-type>

    <struct-type type-name='armor_properties'>
        <df-flagarray name='flags' index-enum='armor_general_flags'/>
        <int32_t name="layer"/>
        <int16_t name="layer_size"/>
        <int16_t name="layer_permit"/>
        <int16_t name="coverage"/>
    </struct-type>

    <enum-type type-name='armor_flags'>
        <enum-item/>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_armorst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.armor'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="name_preplural"/>
        <stl-string name="material_placeholder"/>
        <int32_t name="weight"/>
        <int32_t name="value"/>
        <int8_t name="armorlevel"/>
        <int16_t name="ubstep"/>
        <int16_t name="lbstep"/>
        <int16_t name="mainblock"/>
        <int16_t name="secondblock"/>
        <int32_t name="material_size"/>

        <compound name='props' type-name='armor_properties'/>

        <df-flagarray name='flags' index-enum='armor_flags'/>
    </class-type>

    <class-type type-name='itemdef_foodst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.food'>
        <stl-string name="name"/>
        <int16_t name="level"/>
    </class-type>

    <enum-type type-name='gloves_flags'>
        <enum-item/>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_glovesst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.gloves'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="weight"/>
        <int32_t name="value"/>
        <int32_t name="blockpower"/>
        <int8_t name='armorlevel'/>
        <int16_t name="upstep"/>
        <df-flagarray name='flags' index-enum='gloves_flags'/>
        <int32_t name="material_size"/>
        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <enum-type type-name='helm_flags'>
        <enum-item/>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_helmst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.helms'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="weight"/>
        <int32_t name="value"/>
        <int32_t name="blockpower"/>
        <int8_t name='armorlevel'/>
        <df-flagarray name='flags' index-enum='helm_flags'/>
        <int32_t name="material_size"/>
        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <enum-type type-name='instrument_flags'>
        <enum-item name='HARD_MAT'/>
    </enum-type>

    <class-type type-name='itemdef_instrumentst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.instruments'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <df-flagarray name='flags' index-enum='instrument_flags'/>
    </class-type>

    <enum-type type-name='pants_flags'>
        <enum-item name='CHAIN_METAL'/>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_pantsst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.pants'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="name_preplural"/>
        <stl-string name="material_placeholder"/>
        <int32_t name="weight"/>
        <int32_t name="value"/>
        <int32_t name="blockpower"/>
        <int8_t name="armorlevel"/>
        <df-flagarray name='flags' index-enum='pants_flags'/>
        <int32_t name="material_size"/>
        <int16_t name="lbstep"/>

        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <class-type type-name='itemdef_shieldst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.shields'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="weight"/>
        <int32_t name="value"/>
        <int32_t name="blockchance"/>
        <int32_t name="blockpower"/>
        <int8_t name='armorlevel'/>
        <int16_t name="upstep"/>
        <int32_t name="material_size"/>
    </class-type>

    <enum-type type-name='shoes_flags'>
        <enum-item/>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_shoesst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.shoes'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="weight"/>
        <int32_t name="value"/>
        <int32_t name="blockpower"/>
        <int8_t name='armorlevel'/>
        <int16_t name="upstep"/>
        <df-flagarray name='flags' index-enum='shoes_flags'/>
        <int32_t name="material_size"/>

        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <class-type type-name='itemdef_siegeammost' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.siegeammo'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="ammo_class"/>
    </class-type>

    <enum-type type-name='toy_flags'>
        <enum-item name='HARD_MAT'/>
    </enum-type>

    <class-type type-name='itemdef_toyst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.toys'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <df-flagarray name='flags' index-enum='toy_flags'/>
    </class-type>
    
    <class-type type-name='itemdef_trapcompst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.trapcomps'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective"/>
        <int32_t name='damage'/>
        <enum base-type='int32_t' name='damage_type' type-name='damage_type'/>
        <int32_t name="weight"/>
        <int32_t name="hits"/>
        <int32_t name='crit_boost'/>
        <int32_t name="material_size"/>
        <int16_t name="stick_chance"/>
    </class-type>

    <enum-type type-name='weapon_flags'>
        <enum-item name='CAN_STONE'/>
    </enum-type>

    <class-type type-name='itemdef_weaponst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.weapons'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective"/>
        <int32_t name='damage'/>
        <enum base-type='int32_t' name='damage_type' type-name='damage_type'/>
        <int32_t name="weight"/>
        <int32_t name="skill_melee"/>
        <int32_t name="skill_ranged"/>
        <stl-string name="ranged_ammo"/>
        <int32_t name='crit_boost'/>
        <int16_t name="two_handed"/>
        <int16_t name="minimum_size"/>
        <int32_t name="material_size"/>
        <df-flagarray name='flags' index-enum='weapon_flags'/>
        <int16_t name="stick_chance"/>
    </class-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
