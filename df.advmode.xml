<data-definition>
    <enum-type type-name='ui_advmode_menu' base-type='int16_t'>
        <enum-item name='Default' value='0'/>
        <enum-item name='Look'/>
        <enum-item name='Talk'/>
        <enum-item name='Inventory'/>
        <enum-item name='Drop'/>

        <enum-item name='ThrowItem'/>
        <enum-item name='Wear'/>
        <enum-item name='Remove'/>
        <enum-item name='Interact'/>
        <enum-item name='PutItem'/>

        <enum-item name='PutInto'/>
        <enum-item name='Eat'/>
        <enum-item name='ThrowAim'/>
        <enum-item name='Fire'/>
        <enum-item name='Get'/>

        <enum-item name='CombatPrefs'/>
        <enum-item name='MovementPrefs'/>
        <enum-item name='InteractHow'/>
        <enum-item name='Move'/>
        <enum-item name='Announcements'/>

        <enum-item name='Attack'/>
        <enum-item name='UseBuilding'/>
        <enum-item name='Travel'/>
        <enum-item name='Wrestle'/>
        <enum-item name='AttackConfirm'/>

        <enum-item name='WrestleConfirm'/>
        <enum-item name='SleepConfirm'/>
    </enum-type>

    <struct-type type-name='conversation'>
        <stl-string name='conv_title'/>
        <enum base-type='int32_t' name='state'>
            <enum-item name='started'/>
            <enum-item name='active'/>
            <enum-item name='finished'/>
            <enum-item name='quit'/>
        </enum>
        <stl-vector type-name='int16_t' name='talk_choices' />

        <int32_t name='unk_30' ref-target='unit'/>
        <int32_t name='unk_34' ref-target='historical_figure'/>

        <int32_t name='unk_3c' ref-target='unit'/>
        <int32_t name='unk_40' ref-target='historical_figure'/>

        <int32_t name='unk_48' ref-target='unit'/>
        <int32_t name='unk_4c' ref-target='historical_figure'/>


        <stl-vector name='speech'>
            <pointer>
                <stl-vector name='text' pointer-type='stl-string' comment='wordwrap'/>
                <int32_t name='speaker_unit' ref-target='unit'/>
                <int32_t name='speaker_hf' ref-target='historical_figure'/>
                <int16_t name='fg'/>
                <int16_t name='bg'/>
                <int16_t name='bright'/>
            </pointer>
        </stl-vector>
    </struct-type>

    <struct-type type-name='ui_advmode'>
        <enum base-type='int16_t' name='menu' type-name='ui_advmode_menu'/>

        <bool name='travel_clouds'/>
        <int8_t/>
        <int8_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int8_t/>
        <int8_t/>
        <int16_t/>
        <int16_t name='travel_timer'/>
        <compound name='travel_pos_g' type-name='coord2d'/>
        <compound name='travel_pos_r' type-name='coord2d'/>

        <stl-vector name='talk_targets'>
            <pointer>
                <int32_t name='unit_id' ref-target='unit'/>
                <int32_t name='histfig_id' ref-target='historical_figure'/>
            </pointer>
        </stl-vector>
        <stl-vector name='conversations' pointer-type='conversation'/>

        <int32_t name='talk_target_cursor'/>

        <stl-vector type-name='int32_t' name='searched_x'/>
        <stl-vector type-name='int32_t' name='searched_y'/>
        <stl-vector type-name='int32_t' name='searched_z'/>
        <stl-vector type-name='int32_t' name='searched_timeout'/>

        <int8_t name='can_retire'/>
        <int32_t name='peasant_time_elapsed'/>
        <int32_t name='total_time_elapsed'/>
        <int32_t name='skill_level'/>
        <int8_t/>

        <int16_t/>?
        <int8_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <stl-vector name='interact_options' pointer-type='adventure_item_interact_choicest'/>
        <stl-vector name='commands' pointer-type='adventure_optionst'/>
        <stl-vector name='move_options' pointer-type='adventure_movement_optionst'/>
    </struct-type>

    <struct-type type-name='quest_list_link'>
        <code-helper name='describe'>(describe-obj $.item)</code-helper>
        <pointer name='item' type-name='adv_task'/>
        <pointer name='prev' type-name='quest_list_link'/>
        <pointer name='next' type-name='quest_list_link'/>
    </struct-type>

    <class-type type-name='adv_task' original-name='taskst' key-field='id'>
        <pointer name='link' type-name='quest_list_link'/>

        <int32_t name='id'/>

        <int32_t name='quest_giver_id' ref-target='historical_figure'/>
        <int32_t name='unk_1' ref-target='world_site'/>
        <int32_t name='unk_2'/>
        <int32_t name='adventurer_id' ref-target='historical_figure'/>
        <int32_t name='unk_3'/>

        <compound name='target_pos' type-name='coord2d'/>
        <compound name='giver_pos' type-name='coord2d'/>
        <compound name='unk_4' type-name='coord2d'/>
        <compound name='unk_5' type-name='coord2d'/>
    </class-type>

    <class-type type-name='task_kill_nemesisst' inherits-from='adv_task'>
        <int32_t/>
        <int32_t name='target_site' ref-target='world_site'/>
        <int32_t name='target_hfid' ref-target='historical_figure'/>
        <int8_t/>
    </class-type>

    <class-type type-name='adventure_optionst'>
        <virtual-methods>
            <vmethod name='getDescription'><pointer type-name='stl-string'/></vmethod>
            <vmethod is-destructor='true'/>
            <vmethod name='getIngestedItem'><ret-type><pointer type-name='item'/></ret-type></vmethod>
            <vmethod name='performAction'>
                <pointer type-name='int32_t' name='remove_vermin_idx'/>
                <pointer type-name='bool' name='did_pick_vermin'/>
                <pointer type-name='bool' name='did_set_fire'/>
            </vmethod>

            <vmethod ret-type='int16_t' name='getPlayerPosX'/>
            <vmethod ret-type='int16_t' name='getPlayerPosY'/>
            <vmethod ret-type='int16_t' name='getPlayerPosZ'/>

            <vmethod ret-type='int16_t' name='getTargetPosX'/>
            <vmethod ret-type='int16_t' name='getTargetPosY'/>
            <vmethod ret-type='int16_t' name='getTargetPosZ'/>

            <vmethod name='deleteSpatter'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='adventure_option_eat_unit_contaminantst' inherits-from='adventure_optionst'>
        <pointer name='unit' type-name='unit'/>
        <pointer name='contaminant' type-name='unit_contaminant'/>
    </class-type>

    <class-type type-name='adventure_option_eat_item_contaminantst' inherits-from='adventure_optionst'>
        <pointer name='unit' type-name='unit'/>
        <pointer name='inv_item' type-name='unit_inventory_item'/>
        <pointer name='contaminant' type-name='contaminant'/>
    </class-type>

    <class-type type-name='adventure_option_view_contaminantst' inherits-from='adventure_optionst'>
        <pointer name='unit' type-name='unit'/>
        <pointer name='contaminant' type-name='unit_contaminant'/>
    </class-type>

    <class-type type-name='adventure_environment_optionst' inherits-from='adventure_optionst'>
        <compound name='target_pos' type-name='coord'/>
        <compound name='player_pos' type-name='coord'/>
    </class-type>

    <class-type type-name='adventure_environment_pickup_ignite_vegst' inherits-from='adventure_environment_optionst'>
        <int32_t name='plant_idx'/>
    </class-type>

    <class-type type-name='adventure_environment_pickup_vermin_eventst' inherits-from='adventure_environment_optionst'>
        <int32_t name='vermin_idx'/>
    </class-type>

    <class-type type-name='adventure_environment_drink_waterst' inherits-from='adventure_environment_optionst' />
    <class-type type-name='adventure_environment_drink_bloodst' inherits-from='adventure_environment_optionst' />
    <class-type type-name='adventure_environment_eat_mudst' inherits-from='adventure_environment_optionst' />
    <class-type type-name='adventure_environment_eat_vomitst' inherits-from='adventure_environment_optionst' />
    <class-type type-name='adventure_environment_eat_slimest' inherits-from='adventure_environment_optionst' />

    <class-type type-name='adventure_movement_optionst'>
        <compound name='dest' type-name='coord'/>
        <compound name='source' type-name='coord'/>
        <virtual-methods>
            <vmethod name='getDescription'><pointer type-name='stl-string'/></vmethod>
            <vmethod name='performAction'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='adventure_movement_attack_creaturest' inherits-from='adventure_movement_optionst'>
        <stl-vector name='targets' type-name='int32_t' ref-target='unit'/>
    </class-type>

    <class-type type-name='adventure_movement_movest' inherits-from='adventure_movement_optionst'>
        <int32_t name='unit_path_flags'/>
    </class-type>

    <class-type type-name='adventure_movement_building_interactst' inherits-from='adventure_movement_optionst'>
        <int32_t name='building_id' ref-target='building'/>
    </class-type>

    <class-type type-name='adventure_item_interact_choicest'>
        <virtual-methods>
            <vmethod name='getDescription'><pointer type-name='stl-string'/></vmethod>
            <vmethod name='performAction'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='adventure_item_interact_pull_outst' inherits-from='adventure_item_interact_choicest'/>
    <class-type type-name='adventure_item_interact_strugglest' inherits-from='adventure_item_interact_choicest'/>

    <class-type type-name='adventure_item_interact_fillst' inherits-from='adventure_item_interact_choicest'>
        <pointer type-name='item' name='item'/>
        <compound type-name='coord' name='self'/>
        <compound type-name='coord' name='target'/>
    </class-type>

    <class-type type-name='adventure_item_interact_fill_with_waterst' inherits-from='adventure_item_interact_fillst'/>
    <class-type type-name='adventure_item_interact_fill_with_bloodst' inherits-from='adventure_item_interact_fillst'/>
    <class-type type-name='adventure_item_interact_fill_with_mudst' inherits-from='adventure_item_interact_fillst'/>
    <class-type type-name='adventure_item_interact_fill_with_vomitst' inherits-from='adventure_item_interact_fillst'/>
    <class-type type-name='adventure_item_interact_fill_with_slimest' inherits-from='adventure_item_interact_fillst'/>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
