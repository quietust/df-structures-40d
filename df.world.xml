<data-definition>
    <struct-type type-name='world'>
        <stl-vector name='gem_clusters'>
            <pointer type-name='mineral_cluster'/>
        </stl-vector>
        <stl-vector name='stone_clusters'>
            <pointer type-name='mineral_cluster'/>
        </stl-vector>

        <stl-vector name='engravings'>
            <pointer type-name='engraving'/>
        </stl-vector>

        <stl-vector name='vermin'>
            <pointer type-name='vermin'/>
        </stl-vector>

        <stl-vector name='unk_40'>
            <pointer type-name='coord16'/>
        </stl-vector>

        <stl-vector name='drink_areas'>
            <pointer>
                <int32_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int8_t/>
                <int16_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='caveriver_tiles'>
            <pointer type-name='coord16'/>
        </stl-vector>
        <stl-vector name='chasm_tiles'>
            <pointer type-name='coord16'/>
        </stl-vector>
        <stl-vector name='magmaflow_tiles'>
            <pointer type-name='coord16'/>
        </stl-vector>
        <stl-vector name='waterfalls'>
            <pointer>
                <enum type-name='flow_type' base-type='int16_t' name='type'/>
                <compound type-name='coord16' name='pos'/>
            </pointer>
        </stl-vector>
        <stl-vector name='cavein_regions'>
            <pointer>
                <compound type-name='coord16' name='pos'/>
                <int16_t name='timer'/>
            </pointer>
        </stl-vector>
        <stl-vector name='campfires'>
            <pointer>
                <compound type-name='coord' name='pos'/>
                <int32_t name='timer'/>
            </pointer>
        </stl-vector>
        <stl-vector name='contaminated_tiles'>
            <pointer type-name='coord16'/>
        </stl-vector>
        <stl-vector name='web_clusters'>
            <pointer>
                <stl-vector type-name='int16_t'/>
                <stl-vector type-name='int16_t'/>
                <int16_t/>
                <int16_t name='race' ref-target='creature_raw'/>
                <compound type-name='coord2d16' name='pos_min'/>
                <compound type-name='coord2d16' name='pos_max'/>
                <stl-vector>
                    <pointer type-name='unit'/>
                </stl-vector>
            </pointer>
        </stl-vector>
        <stl-vector name='fires'>
            <pointer>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
                <int16_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='effects'>
            <pointer>
                <int32_t/>
                <pointer type-name='job'/>
                <int32_t name='type'/> 2 = falling into chasm
                <int16_t name='foreground'/>
                <int16_t name='background'/>
                <int8_t name='bright'/>
                <compound type-name='coord' name='pos'/>
                <int32_t name='timer'/>
                <int32_t/>
            </pointer>
        </stl-vector>
        <stl-vector name='coin_batches'>
            <pointer>
                <int32_t name='year'/>
                <enum base-type='int16_t' name='material' type-name='material_type'/>
                <int32_t name='entity' ref-target='historical_entity'/>
                <int32_t name='ruler' ref-target='historical_figure'/>
                <compound name='image_front' type-name='art_image_ref'/>
                <compound name='image_back' type-name='art_image_ref'/>
            </pointer>
        </stl-vector>
        <stl-vector name='populations'>
            <pointer type-name='world_population'/>
        </stl-vector>

        --

        <stl-vector name='manager_orders'>
            <pointer type-name='manager_order'/>
        </stl-vector>

        <stl-vector name='mandates'>
            <pointer type-name='mandate'/>
        </stl-vector>

        --  Entities

        <compound name='entities'>
            <stl-vector name='all'>
                <pointer type-name='historical_entity'/>
            </stl-vector>

            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer type-name='historical_entity'/>
            </stl-vector>
        </compound>

        -- Units

        <compound name='units'>
            <stl-vector name='all'>
                <pointer type-name='unit'/>
            </stl-vector>

            <static-array name='other' count='4'>
                <stl-vector>
                    <pointer type-name='unit'/>
                </stl-vector>
            </static-array>

            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer type-name='unit'/>
            </stl-vector>
        </compound>

        -- Unknown

        <stl-vector name='unit_chunks'>
            <pointer type-name='unit_chunk'/>
        </stl-vector>
        <stl-vector name='art_image_chunks'>
            <pointer type-name='art_image_chunk'/>
        </stl-vector>

        -- Nemesis

        <compound name='nemesis'>
            <stl-vector name='all'>
                <pointer type-name='nemesis_record'/>
            </stl-vector>

            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer type-name='nemesis_record'/>
            </stl-vector>
        </compound>

        -- Items

        <compound name='items'>
            dtor 852f4b0

            <stl-vector name='all'>
                <pointer type-name='item'/>
            </stl-vector>

            <static-array name='other' count='82' index-enum='items_other_id'>
                <stl-vector>
                    <pointer type-name='item'/>
                </stl-vector>
            </static-array>

            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer type-name='item'/>
            </stl-vector>

            <stl-vector name='bad_tag' type-name='int32_t'/>
        </compound>

        -- Artifacts

        <compound name='artifacts'>
            <stl-vector name='all'>
                <pointer type-name='artifact_record'/>
            </stl-vector>

            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer type-name='artifact_record'/>
            </stl-vector>
        </compound>

        -- Jobs and projectiles

        <df-linked-list name='job_list' type-name='job_list_link'/>

        <df-linked-list name='proj_list' type-name='proj_list_link'/>

        -- Buildings

        <compound name='buildings'>
            dtor 85316f0

            <stl-vector name='all'>
                <pointer type-name='building'/>
            </stl-vector>

            <static-array name='other' count='63' index-enum='buildings_other_id'>
                <stl-vector>
                    <pointer type-name='building'/>
                </stl-vector>
            </static-array>

            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer type-name='building'/>
            </stl-vector>
        </compound>

        -- Unknown

        <compound name='hauling'>
            <static-array count='64' name='local_weapon' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.weapons[$]'/></static-array>
            <static-array count='64' name='foreign_weapon' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.weapons[$]'/></static-array>
            <static-array count='64' name='local_siegeammo' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.siegeammo[$]'/></static-array>
            <static-array count='64' name='foreign_siegeammo' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.siegeammo[$]'/></static-array>
            <static-array count='64' name='local_trapcomp' index-enum='material_type'><int8_t/></static-array>
            <static-array count='64' name='foreign_trapcomp' index-enum='material_type'><int8_t/></static-array>
            <static-array count='64' name='local_armor' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.armor[$]'/></static-array>
            <static-array count='64' name='local_helm' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.helms[$]'/></static-array>
            <static-array count='64' name='local_shoes' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.shoes[$]'/></static-array>
            <static-array count='64' name='local_gloves' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.gloves[$]'/></static-array>
            <static-array count='64' name='local_pants' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.pants[$]'/></static-array>
            <static-array count='64' name='local_shield' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.shields[$]'/></static-array>
            <static-array count='64' name='foreign_armor' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.armor[$]'/></static-array>
            <static-array count='64' name='foreign_helm' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.helms[$]'/></static-array>
            <static-array count='64' name='foreign_shoes' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.shoes[$]'/></static-array>
            <static-array count='64' name='foreign_gloves' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.gloves[$]'/></static-array>
            <static-array count='64' name='foreign_pants' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.pants[$]'/></static-array>
            <static-array count='64' name='foreign_shields' index-enum='material_type'><stl-vector type-name='int8_t' index-refers-to='$global.world.raws.itemdefs.shields[$]'/></static-array>
            <int32_t name='num_stockpiling_jobs'/>
            <int32_t name='num_stone_jobs'/>
            <int32_t name='num_wood_jobs'/>
            <int32_t name='num_item_jobs'/>
            <int32_t name='num_bin_jobs'/>
            <int32_t name='num_burial_jobs'/>
            <int32_t name='num_food_jobs'/>
            <int32_t name='num_refuse_jobs'/>
            <int32_t name='num_furniture_jobs'/>
            <int32_t name='num_animal_jobs'/>
            <int32_t name='num_total_haulers'/>
            <int32_t name='num_stone_haulers'/>
            <int32_t name='num_wood_haulers'/>
            <int32_t name='num_item_haulers'/>
            <int32_t name='num_bin_haulers'/>
            <int32_t name='num_body_haulers'/>
            <int32_t name='num_food_haulers'/>
            <int32_t name='num_refuse_haulers'/>
            <int32_t name='num_furniture_haulers'/>
            <int32_t name='num_animal_haulers'/>

            <int8_t/>
            <int8_t name='prepared_meal'/>
            <stl-vector name='seed_mats' type-name='int8_t' index-refers-to='$global.world.raws.matgloss_plant[$]'/>
            <stl-vector name='plant_mats' type-name='int8_t' index-refers-to='$global.world.raws.matgloss_plant[$]'/>
            <stl-vector name='cheese_mats' type-name='int8_t' index-refers-to='$global.world.raws.creatures[$]'/>
            <stl-vector name='meat_mats' type-name='int8_t' index-refers-to='$global.world.raws.creatures[$]'/>
            <stl-vector name='leaves_mats' type-name='int8_t' index-refers-to='$global.world.raws.matgloss_plant[$]'/>
            <stl-vector name='powder_mats' type-name='int8_t' index-refers-to='$global.world.raws.matgloss_plant[$]'/>
            <int8_t name='seeds'/>
            <int8_t name='plants'/>
            <int8_t name='cheese'/>
            <int8_t name='fish'/>
            <int8_t name='meat'/>
            <int8_t name='leaves'/>
            <int8_t name='powder'/>
            <stl-vector name='plant_extract' type-name='int8_t' index-refers-to='$global.world.raws.matgloss_plant[$]'/>
            <stl-vector name='animal_extract' type-name='int8_t' index-refers-to='$global.world.raws.creatures[$]'/>
            <stl-vector name='liquid_misc' type-name='int8_t' index-enum='material_type'/>
            <stl-vector name='fat' type-name='int8_t' index-enum='material_type'/>
            <int8_t name='weapons'/>
            <int8_t name='armor'/>
            <int8_t name='ammo'/>
            <int8_t name='coins'/>
            <int8_t name='bar_blocks'/>
            <int8_t name='gems'/>
            <int8_t name='finished_goods'/>
            <int8_t name='leather'/>
            <int8_t name='cloth'/>
        </compound>

        <compound name='plants'>
            <stl-vector name='all'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='shrub_forest'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='shrub_swamp'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='shrub_river'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='shrub_cave'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='unknown'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='tree_outside_dry'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='tree_outside_wet'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='tree_inside_dry'>
                <pointer type-name='plant'/>
            </stl-vector>
            <stl-vector name='tree_inside_wet'>
                <pointer type-name='plant'/>
            </stl-vector>
        </compound>

        -- Adventure quests

        <df-linked-list name='quests' type-name='quest_list_link'/>

        -- Unknown

        <compound name='unk_4dcc'>
            <static-array type-name='int8_t' count='500' comment='bool array?'/>
            <static-array type-name='int8_t' count='250000'/>
            <int32_t/>
        </compound>

        <compound name='schedules'>
            <stl-vector name='all'>
                <pointer>
                    <int32_t name='id'/>
                    <stl-vector>
                        <pointer>
                            <int16_t/>
                            <int16_t/>
                            <int16_t/>
                            <int16_t/>
                            <int8_t/>
                        </pointer>
                    </stl-vector>
                </pointer>
            </stl-vector>
            <stl-vector name='bad' has-bad-pointers='true'>
                <pointer/>
            </stl-vector>
        </compound>

        <pointer name='selected_building' type-name='building'/>
        <compound name='build_type' is-union='true'>
            <enum base-type='int16_t' name='building_type' type-name='building_type'/>
            <enum base-type='int16_t' name='selected_stockpile_type' type-name='stockpile_category'/>
        </compound>
        <compound name='build_subtype' is-union='true'>
            <enum base-type='int16_t' name='furnace_type' type-name='furnace_type'/>
            <enum base-type='int16_t' name='workshop_type' type-name='workshop_type'/>
            <enum base-type='int16_t' name='siegeengine_type' type-name='siegeengine_type'/>
            <enum base-type='int16_t' name='trap_type' type-name='trap_type'/>
        </compound>
        <bool/>

        <int16_t name='build_width'/>
        <int16_t name='build_height'/>
        <int8_t name='build_direction_1'/>
        <int8_t name='build_direction_2' comment='aqueduct only'/>
        <int8_t name='build_direction_3' comment='aqueduct only'/>
        <int8_t name='build_direction_4' comment='aqueduct only'/>

        <compound name='map'>
            52cdc
            <stl-vector name='map_blocks'>
                <pointer type-name='map_block'/>
            </stl-vector>
            <pointer name='block_index' is-array='true'>
                <pointer is-array='true'>
                    <pointer is-array='true'>
                        <pointer type-name='map_block'/>
                    </pointer>
                </pointer>
            </pointer>

            <int32_t name='x_count_block'/>
            <int32_t name='y_count_block'/>
            <int32_t name='z_count_block'/>
            <int32_t name='x_count'/>
            <int32_t name='y_count'/>
            <int32_t name='z_count'/>
        </compound>

        <static-array count='16' name='stone_types'>
            <int16_t ref-target='matgloss_stone'/>
        </static-array>

        <static-array name='unknown_420d4'
                      count='2810' type-name='int16_t'/>

        <static-array count='19999' type-name='int32_t'/>

        <int32_t/>
        <static-array count='3' type-name='int32_t'/>
        <int32_t/>
        <static-array count='14364' type-name='int8_t'/>
        <static-array count='65536' type-name='int8_t'/>
        <static-array count='80' type-name='int8_t'/>
        <static-array count='20000' type-name='int32_t'/>
        <int32_t/>
        <static-array count='20000' type-name='int8_t'/>
        <int8_t/>
        <static-array count='3' type-name='int32_t' name='feature_type'/>
        <static-array count='3' type-name='int32_t' name='feature_depth'/>
        <int32_t/>
        <int8_t/>
        <int32_t/>
        <int32_t/>
        <compound type-name='world_data' name='world_data'/>
        <int32_t/>
        <compound>
            <int16_t/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <int16_t/>
            <int32_t/>
            <int32_t/>
            <stl-vector type-name='pointer'/>
            <stl-vector type-name='pointer'/>
            <stl-vector type-name='pointer'/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <stl-vector type-name='pointer'/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <stl-vector type-name='pointer'/>
            <stl-vector type-name='pointer'/>
        </compound>
        <int32_t/>
        <int32_t/>
        <int16_t name='fortress_gate_z'/>
        <static-array count='480' type-name='int16_t'/>
        <static-array count='480' type-name='int16_t'/>
        <static-array count='960' type-name='int16_t'/>
        <int8_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>

        -- RAWs

        <compound name='raws' type-name='world_raws'/>
        <int16_t name='lava_stone' ref-target='matgloss_stone'/>
        <int16_t name='river_stone' ref-target='matgloss_stone'/>
        <int16_t name='flux_stone' ref-target='matgloss_stone'/>
        <int16_t name='sharp_stone' ref-target='matgloss_stone'/>
        <int16_t name='glass_gem' ref-target='matgloss_gem'/>

        <compound name='fortress'>
            <stl-string/>
            <compound type-name='language_name' name='name'/>
            <int32_t/>
            <int32_t/>
            <int8_t/>
            <int16_t/>
            <int32_t/>
            <int16_t/>
            <int16_t/>
            <compound name='pos' type-name='coord2d16'/>
            <int8_t/>
            <int32_t/>
            <stl-vector type-name='pointer'/>
        </compound>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
